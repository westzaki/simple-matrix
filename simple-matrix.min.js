(function(r){var t=function(r){if(!(r instanceof Array&&0!==r.length&&r[0]instanceof Array&&0!==r[0].length))throw Error("invalid argument");this.col=r.length,this.row=r[0].length,this.val=[];var t,o;for(t=0;this.col>t;t++){if(this.row!==r[t].length)throw Error("invalid argument");for(this.val[t]=[],o=0;this.row>o;o++)this.val[t][o]=r[t][o]}};t.prototype={getRowSize:function(){return this.row},getColSize:function(){return this.col},getVal:function(r,t){if(r===void 0||t===void 0||0>r||0>t||r>this.col||t>this.row)throw Error("invalid argument");return this.val[r][t]},add:function(r){if(!(r instanceof t))throw Error("invalid argument");if(r.col!==this.col||r.row!==this.row)throw Error("input matrix size is wrong");var o,i,n=[];for(o=0;this.col>o;o++)for(n[o]=[],i=0;this.row>i;i++)n[o][i]=r.val[o][i]+this.val[o][i];return new t(n)},sub:function(r){return this.add(r.scalar(-1))},scalar:function(r){if("number"!=typeof r)throw Error("invalid argument");var o,i,n=[];for(o=0;this.col>o;o++)for(n[o]=[],i=0;this.row>i;i++)n[o][i]=r*this.val[o][i];return new t(n)},mul:function(r){if(!(r instanceof t))throw Error("invalid argument");if(r.col!==this.row)throw Error("input matrix size is wrong");var o,i,n,a=[];for(o=0;this.col>o;o++)for(a[o]=[],i=0;r.row>i;i++){var e=0;for(n=0;this.row>n;n++)e+=this.val[o][n]*r.val[n][i];a[o][i]=e}return new t(a)},clone:function(){return this.scalar(1)},compare:function(r){if(!(r instanceof t))return!1;var o,i;if(this.col!==r.col||this.row!==r.row)return!1;for(o=0;this.col>o;o++)for(i=0;this.row>i;i++)if(this.val[o][i]!==r.val[o][i])return!1;return!0},det:function(){if(this.col!==this.row)return void 0;var r,t,o,i=1,n=this.clone(),a=n.col;for(r=0;a>r;r++){for(t=0;a>t;t++)if(t>r){var e=n.val[t][r]/n.val[r][r];for(o=0;a>o;o++)n.val[t][o]-=n.val[r][o]*e}i*=n.val[r][r]}return i},inv:function(){var r=this.det();if(void 0===r||0===r)return void 0;var o,i,n,a=this.clone(),e=a.col,f=[];for(o=0;e>o;o++)for(f[o]=[],i=0;e>i;i++)f[o][i]=o===i?1:0;for(o=0;e>o;o++){var l=1/a.val[o][o];for(i=0;e>i;i++)a.val[o][i]*=l,f[o][i]*=l;for(i=0;e>i;i++)if(o!==i)for(l=a.val[i][o],n=0;e>n;n++)a.val[i][n]-=a.val[o][n]*l,f[i][n]-=f[o][n]*l}return new t(f)},trans:function(){var r,o,i=[];for(r=0;this.col>r;r++)for(i[r]=[],o=0;this.row>o;o++)i[r][o]=this.val[o][r];return new t(i)}},"undefined"!=typeof exports?exports.Matrix=t:r.Matrix=t})(window);